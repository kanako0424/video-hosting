<!DOCTYPE html>
<html>
<head>
  <title>動画アップロードサイト</title>
  <style>
    .video-list {
      margin-bottom: 20px;
    }
    .video-list-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .video-list-item video {
      margin-right: 10px;
    }
    .embed-container {
      position: relative;
      padding-bottom: 56.25%; /* 16:9のアスペクト比 */
      height: 0;
      overflow: hidden;
    }
    .embed-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <h1>動画アップロードサイト</h1>
  
  <div>
    <input type="file" id="video-input">
    <button onclick="uploadVideo()">アップロード</button>
  </div>
  
  <div class="video-list">
    <h2>アップロードされた動画</h2>
    <ul id="video-list"></ul>
  </div>
  
  <script>
    function uploadVideo() {
      var input = document.getElementById('video-input');
      var file = input.files[0];
      
      var video = document.createElement('video');
      video.src = URL.createObjectURL(file);
      video.controls = true;
      video.style.maxWidth = '200px';
      
      var listItem = document.createElement('li');
      listItem.classList.add('video-list-item');
      listItem.appendChild(video);
      
      var videoList = document.getElementById('video-list');
      videoList.appendChild(listItem);
      
      embedVideo(video.src); // 別のサイトに動画を埋め込む
    }
    
    function embedVideo(videoUrl) { // enbedVideo
      var embedContainer = document.createElement('div');
      embedContainer.classList.add('embed-container');
      
      var iframe = document.createElement('iframe');
      iframe.src = 'https://647dd505dd2997009d4c6306--timely-halva-8a11f0.netlify.app/embed?video=' + encodeURIComponent(videoUrl);
      iframe.allowFullscreen = true;
      embedContainer.appendChild(iframe);
      
      document.body.appendChild(embedContainer);
    }
  </script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyAn991_1uqde6ZjXO9wT7zG0Z2zF2SPZFA",
      authDomain: "video-hosting-2e946.firebaseapp.com",
      projectId: "video-hosting-2e946",
      storageBucket: "video-hosting-2e946.appspot.com",
      messagingSenderId: "183560215296",
      appId: "1:183560215296:web:313d7283dd4ca4d6deb1e5",
      measurementId: "G-RVN7HT541G"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
  </script>
</body>
</html>
